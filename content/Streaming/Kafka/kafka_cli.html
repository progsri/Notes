<h2><strong> cli </strong></h2>
<hr>

<h3><strong> - Installation </strong></h3>
<p> Kafka depends on zookeeper </p>

<p><mark>zookeeper</mark> opens port on 8080,2181 and random port.</p>
<p class="text-danger"> What is port 8080 used for </p>
<p class="text-danger"> What is port 2181 used for </p>
<p class="text-danger"> What is random port used for </p>

<pre class="language-shell line-number"><code>
cp ./conf/zoo_sample.cfg ./conf/zoo.cfg
./bin/zkServer.sh start
ZooKeeper JMX enabled by default
Using config: /home/progsri/ProgSri/ENGINE/ZooKeeper/apache-zookeeper-3.5.5-bin/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
</code></pre>

<p> <mark> Kafka </mark> opens port on 9092 and a random port </p>
<p class="text-danger"> What is port 9092 used for </p>
<p class="text-danger"> What is random port used for </p>
<pre class="language-shell line-number"><code>
 ./bin/kafka-server-start.sh ./config/server.properties
</code></pre>

<hr>
<h3><strong> - Topic </strong></h3>

<hr>
<h4><strong> Create a topic </strong></h4>
<p> --replication-factor is 1 as there is only one node </p>
<code>
/kafka-topics.sh --bootstrap-server localhost:9092 --topic first_topic --create --partitions 3 --replication-factor 1 
</code>

<hr>
<h4><strong> Describe a topic </strong></h4>
<code>
 ./kafka-topics.sh --bootstrap-server localhost:9092 --topic first_topic --describe
</code>
<pre class="language-shell line-number"><code>
Topic:first_topic	PartitionCount:3	ReplicationFactor:1	Configs:segment.bytes=1073741824
	Topic: first_topic	Partition: 0	Leader: 0	Replicas: 0	Isr: 0
	Topic: first_topic	Partition: 1	Leader: 0	Replicas: 0	Isr: 0
	Topic: first_topic	Partition: 2	Leader: 0	Replicas: 0	Isr: 0
</code></pre>
<p> Tells that broker 0 is the leader, replica, Isr (In sync replica ) for partitions 0,1,2 as there is only 1 broker.</p>

<hr>
<h4><strong> Delete a topic </strong></h4>
<code>
./kafka-topics.sh --bootstrap-server localhost:9092 --topic first_topic --delete  	
</code>

<hr>
<h4><strong> List topics </strong></h4>
<code>
./kafka-topics.sh --bootstrap-server localhost:9092 --topic first_topic --delete  	
</code>

<hr>
<h3><strong> - Producer </strong></h3>
<hr>
<p> Send/writing a message to the topic that is not created yet would create the topic </p>
<code>
	 ./kafka-console-producer.sh --broker-list localhost:9092 --topic non_existing_topic
</code>
<pre class="language-shell line-number"><code>
>This is a test
[2019-08-20 06:14:39,211] WARN [Producer clientId=console-producer] Error while fetching metadata with correlation id 3 : {non_existing_topic=LEADER_NOT_AVAILABLE} (org.apache.kafka.clients.NetworkClient)
>still writing to it
</code> </pre>
<p> We get a WARN as the topic was just created and the leader election for its partiton is not done yet. </p>
<p class="text-danger"> What is the default producer ack, may be producer is waiting for leader to ack. </p>
<p> Each producer can choose what level of ack it should wait for.. See concepts for details.
<code> ./kafka-console-producer.sh --broker-list localhost:9092 --topic topic_2 --producer-property acks=all </code>
</p>

<hr>
<h3><strong> - Consumer </strong></h3>
<hr>
<h4><strong> consuming/reading a message in real time </strong></h4>
<p> By default you will be only able to consume if the producer is writing in real time. </p>
<code> ./kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic topic_2  </code>

<p> To consumer message from the beginning </p>
<code>  ./kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic topic_2 --from-beginning
 </code>

<p class="text-danger"> To consumer message from the a different location  </p>
<code></code>

<hr>
<h3><strong> - Consumer Group </strong></h3>
<p> Each group gets a group id. </p>
<code>  ./kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic topic_2 --group group-name </code>
<p> All the consumers in the group share the load of reading, so each message would end up to a different consumber.
<mark> However never will a partition be consumed by 2 or more consumers in the consumber group. So if there are 4 
consumers and 3 partitions then 1 consumer will be in active ( would never consume )
</mark>
</p>

















